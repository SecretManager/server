## P01

- 회원가입
    - [X] 회원은 아이디, 비밀번호, 이메일 정보를 통해 회원 가입이 가능하다.
        - [X] 이메일은 비밀번호 복구용이며, 선택 가능하다.
        - [X] P01 에서는 이메일 인증 기능은 없다.

- [X] 이미지, 텍스트, 비디오 파일 등을 암호화 할 수 있어야 한다.
    - [X] 요청 가능한 파일의 최대 용량은 3GB 이다.

---

## P02

- [X] 암호화 시 서버별 기본 키로 암호화한다.
- [X] 암호화 시 파일 별 암호화를 추가로 적용한다.
    - [X] 암호화된 파일을 서버에 전달하여 복호화 할 때, 파일별 비밀 키를 추가로 입력받아야 한다.
- [X] 파일 암호화 시, 암호화 된 내용을 파일로 응답한다.
- [X] 파일 암호화 시, 암호화 된 파일을 S3 에 업로드한다.
    - [X] 업로드 시에는 파일 이름이 겹치지 않도록 관리한다.
- [X] 암호화 된 파일을 복호화 할 수 있어야 한다.
    - [X] 암호화 된 파일 자체를 넘겨주면 해당 파일을 복호화하여 응답한다.
    - [X] 회원가입된 유저가, 자신의 암호화된 파일 id 에 대한 복호화 요청을 보낼 수 있다.
- [X] 암호화 된 파일을 서버에 저장할 것인지, 혹은 파일로 응답받을 것인지를 저장할 수 있어야 한다.
    - [X] 비회원은 파일로 응답받는 것만 가능하다.
    - [X] 회원은 둘 다 가능하며, 동시에도 가능하다.
- [X] 회원은 자신이 저장한 암호화된 파일을 복호화하여 다운받는 것이 가능하다.
- [X] 회원은 자신이 저장한 암호화된 파일을 그 자체로 다운받는 것이 가능하다.
- [X] 암호화 된 파일을 서버에 전달하여, 복호화하는 것이 가능하다.

---

## P03

- 용어 정리
    - 서버 키 : 모든 파일에 공통적으로 적용되는 암호화 키이다.
    - 개인 키 : 회원가입한 회원이, 파일을 암 / 복호화 하는 경우 추가로 적용되는 키이다.
        - [X] 단, 파일을 서버에 저장하지 않고 다운받는 경우에는 적용되지 않는다.
        - [X] 회원가입 시 임의의 uuid 로 설정된다.
        - [X] uuid 값은 민감정보가 아니기 때문에 별도의 암호화를 하지 않는다.
    - 폴더 : 파일 목록 암호화 요청 시, 함께 요청된 파일들의 묶음
    - 폴더 키 : 특정 **폴더**에 대해 적용되는 키이다.
        - [X] 요청으로 들어온 키를 그대로 사용하지 않고, `SHA 256 을 통해 1차 해싱`된 값을 키로 사용한다.
        - [X] 즉 실제 암호화에 사용되는 키는 SHA 256 암호화가 2번 이루어진다.
        - 이유는 아래 `기본 폴더 키`를 적용하기 위해서이다.
    - 기본 폴더 키 : 회원가입한 회원이, 일반적으로 폴더 키로 사용할 키를 저장할 수 있다.
        - [X] 서버에 저장해야 하지만, 폴더 키에 사용되는 키는 비밀번호화 비슷한 맥락으로 사용되고 있을 가능성이 높아, SHA-256 암호화를 1번 수행 후 해당 값을 저장한다.
        - [X] 키 변경이 가능하나, 키를 변경하면 기존에 암호화된 파일들은, 변경 전 키로 복호화해야한다.

- [X] 파일을 서버의 저장하는 경우
    - [X] 로그인 후에만 가능
    - [X] 서버 키 -> 폴더 키 -> 개인 키 순서로 적용
    - [X] 여러 파일을 올리는 경우, 해당 파일들에 동일한 폴더 키 적용하여 암호화 (복호화도 마찬가지)
        - [X] 회원이 사전에 설정한 `기본 폴더 키` 사용하거나
        - [X] 요청 시 `별도의 폴더 키`를 설정할 수 있음
        - [X] `폴더 키 사용하지 않음` 도 가능
    - [ ] `암호화된 파일 다운로드` 시에는, 개인 키에 대한 암호화가 풀린 상태로 다운되어야 함
- [X] 파일을 서버에 저장하지 않는 경우
    - [X] 폴더 키, 서버 키 적용
    - [X] 로그인 여부에 관계없음
- [X] 서버에 저장된 파일을 다운받는 경우
    - [X] 로그인 후에만 가능
    - [X] 개인 키 -> 폴더 키 -> 서버 키 순서로 적용
    - [X] `폴더 키를 입력`받거나, `폴더 키 적용하지 않음` 중 하나를 택해야 함.
        - [X] 개인이 저장한 기본 폴더 키의 경우에도, 다운로드 시에는 반드시 입력받아야 한다.

- [ ] 파일 저장 시, 해당 파일의 이름과, 설명이 추가되어야 한다.
    - [ ] 이름이 없는 경우는 없어야 한다. (프론트에서 입력 안하면 자동으로 파일 이름으로 설정하도록)
    - [ ] 설명은 없을 수 있다.

---

## P04

- [ ] 파일별 암호화 시, 복구 가능한 비밀번호를 입력하는 옵션을 제공한다.
    - [ ] 해당 비밀번호를 그대로 DB에 적용하면 안되므로, 양방향 암호화 기능이 필요하다.
        - 이때 사용되는 키는 서버에서 관리한다.
- [ ] 구독한 사용자와, 구독하지 않은 사용자의 용량 크기를 제한한다.
- [ ] 이메일 인증 기능 추가
